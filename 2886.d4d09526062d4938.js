"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2886],{2886:(U,f,i)=>{i.r(f),i.d(f,{CameraPageModule:()=>O});var h=i(6895),v=i(4719),a=i(191),m=i(1808),y=i(2662),p=i(5861),C=i(537),P=i(3682),e=i(4650),x=i(8806),S=i(4586),b=i(4037);function A(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",11)(1,"ion-img",12),e.NdJ("click",function(){const r=e.CHM(t),c=r.$implicit,g=r.index,s=e.oxw();return e.KtG(s.showActionSheet(c,g))}),e.qZA(),e.TgZ(2,"input",13),e.NdJ("change",function(r){const c=e.CHM(t),g=c.$implicit,s=c.index,u=e.oxw();return e.KtG(u.checkValue(g.webviewPath,r,s))}),e.qZA()()}if(2&o){const t=l.$implicit;e.xp6(1),e.Q6J("src",t.webviewPath)}}function Z(o,l){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"div",16),e._UZ(3,"div",17),e.TgZ(4,"div",17)(5,"ion-button",18),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.placeOrder())}),e._uU(6,"Place Order"),e.qZA()()()()()}}const T=[{path:"",component:(()=>{class o{constructor(t,n,r,c,g,s){this.photoService=t,this.alertCtrl=n,this.actionSheetController=r,this.storage=c,this.router=g,this.cartService=s,this.isFooter=!1,this.uploadUrl=[],this.photoArray=[],this.selectedFile=null}ngOnInit(){}ionViewWillEnter(){var t=this;return(0,p.Z)(function*(){t.isFooter=!1,yield t.photoService.loadSaved()})()}showActionSheet(t,n){var r=this;return(0,p.Z)(function*(){yield(yield r.actionSheetController.create({header:"Photos",buttons:[{text:"Delete",role:"destructive",icon:"trash",handler:()=>{r.photoService.deletePicture(t,n),r.ionViewWillEnter()}},{text:"Cancel",icon:"close",role:"cancel",handler:()=>{}}]})).present()})()}addPhotoToGallery(){this.photoService.addNewToGallery()}checkValue(t,n,r){this.isFooter=!0,n.target.checked?this.photoArray.push(t):this.photoArray.splice(r,1)}placeOrder(){this.upload()}upload(){var t=this;return(0,p.Z)(function*(){let r=yield new Promise((c,g)=>{var s=Date.now();t.photoArray.forEach(u=>{const w=t.base64ToImage(u),I=t.storage.ref(`product-list/${s}`);t.storage.upload(`product-list/${s}`,w).snapshotChanges().pipe((0,C.x)(()=>{t.downloadURL=I.getDownloadURL(),t.downloadURL.subscribe(d=>{t.uploadUrl.push(d),c(t.uploadUrl)})})).subscribe(d=>{})})});r&&t.placeOrderData(r)})()}placeOrderData(t){if(localStorage.getItem("employee")&&localStorage.getItem("address1")&&localStorage.getItem("address2")&&localStorage.getItem("pincode")&&localStorage.getItem("pincode")&&localStorage.getItem("mobileNo")){let n={userId:localStorage.getItem(P.lq),cartArray:t,status:"ordered",date:new Date,totalAmount:"null",type:"camera"};this.cartService.checkoutProduct.next(n),this.router.navigateByUrl("/checkout"),this.photoService.deleteAllPicture(this.photoArray)}else this.cartService.routingBehaviour.next("/camera"),this.router.navigateByUrl("/user")}base64ToImage(t){const n=t.split(","),r=atob(n[1]),c=new ArrayBuffer(r.length),g=new Uint8Array(c);for(let u=0;u<r.length;u++)g[u]=r.charCodeAt(u);return new Blob([c],{type:"image/png"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(x.y),e.Y36(a.Br),e.Y36(a.BX),e.Y36(S.Q1),e.Y36(m.F0),e.Y36(b.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-camera"]],decls:18,vars:2,consts:[["color","primary"],["slot","start"],["name","menu"],[1,"logo-img"],["src","../../assets/img/login-logo-1.png"],["fullscreen","","scroll-y","true"],["size","6",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","camera"],["class","grid_12 summary",4,"ngIf"],["size","6"],[3,"src","click"],["type","checkbox","id","vehicle1","name","vehicle1","value","Bike",3,"change"],[1,"grid_12","summary"],[1,"inner_container"],[1,"btn-summary","parent-container"],[1,"child"],["fill","outline",3,"click"]],template:function(t,n){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-menu-button"),e._UZ(4,"ion-icon",2),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"img",4),e.qZA()()()(),e.TgZ(7,"ion-content",5)(8,"p"),e._uU(9,"Upload your shopping list here!!"),e.qZA(),e.TgZ(10,"ion-grid")(11,"ion-row"),e.YNc(12,A,3,1,"ion-col",6),e.qZA()(),e.TgZ(13,"ion-fab",7)(14,"ion-fab-button",8),e.NdJ("click",function(){return n.addPhotoToGallery()}),e._UZ(15,"ion-icon",9),e.qZA()()(),e.TgZ(16,"ion-footer"),e.YNc(17,Z,7,0,"div",10),e.qZA()),2&t&&(e.xp6(12),e.Q6J("ngForOf",n.photoService.photos),e.xp6(5),e.Q6J("ngIf",n.isFooter))},dependencies:[h.sg,h.O5,a.YG,a.Sm,a.wI,a.W2,a.IJ,a.W4,a.fr,a.jY,a.Gu,a.gu,a.Xz,a.fG,a.Nd,a.sr],styles:[".summary[_ngcontent-%COMP%]{padding:20px;background:#fff;box-shadow:0 0 5px #0000001a;border-radius:5px}.summary[_ngcontent-%COMP%]   .meta-data[_ngcontent-%COMP%]{border-right:1px solid #eee;padding-right:10%}.summary[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{font-size:2em;text-align:center;line-height:65px}ion-item[_ngcontent-%COMP%]{border:none}.mt-5[_ngcontent-%COMP%]{margin-top:15%}.parent-container[_ngcontent-%COMP%]{display:flex;position:relative;margin-top:10px;justify-content:space-between}"]}),o})(),canActivate:[y.a]}];let M=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.Bz.forChild(T),m.Bz]}),o})(),O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[h.ez,v.u5,a.Pc,M]}),o})()}}]);