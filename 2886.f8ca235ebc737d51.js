"use strict";(self.webpackChunkapp=self.webpackChunkapp||[]).push([[2886],{2886:(_,h,r)=>{r.r(h),r.d(h,{CameraPageModule:()=>U});var m=r(6895),v=r(4719),a=r(191),p=r(1808),y=r(2662),f=r(5861),P=r(537),b=r(3682),e=r(4650),C=r(8806),Z=r(4586),x=r(4037);function T(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"ion-col",11),e._UZ(1,"ion-img",12),e.TgZ(2,"input",13),e.NdJ("change",function(n){const l=e.CHM(t),u=l.$implicit,g=l.index,c=e.oxw();return e.KtG(c.checkValue(u.webviewPath,n,g))}),e.qZA()()}if(2&o){const t=s.$implicit;e.xp6(1),e.Q6J("src",t.webviewPath)}}function A(o,s){1&o&&e._UZ(0,"ion-spinner",20)}function S(o,s){if(1&o){const t=e.EpF();e.TgZ(0,"div",14)(1,"div",15)(2,"div",16),e._UZ(3,"div",17),e.TgZ(4,"div",17),e.YNc(5,A,1,0,"ion-spinner",18),e.TgZ(6,"ion-button",19),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.placeOrder())}),e._uU(7,"Place Order"),e.qZA()()()()()}if(2&o){const t=e.oxw();e.xp6(5),e.Q6J("ngIf",t.isSpinner),e.xp6(1),e.Q6J("disabled",t.btnDisable)}}const M=[{path:"",component:(()=>{class o{constructor(t,i,n,l){this.photoService=t,this.storage=i,this.router=n,this.cartService=l,this.isFooter=!1,this.uploadUrl=[],this.btnDisable=!1,this.photoArray=[],this.isSpinner=!1,this.selectedFile=null}ngOnInit(){}ionViewWillEnter(){var t=this;return(0,f.Z)(function*(){t.isFooter=!1,yield t.photoService.loadSaved()})()}addPhotoToGallery(){this.photoService.addNewToGallery()}checkValue(t,i,n){this.isFooter=!0,i.target.checked?this.photoArray.push(t):this.photoArray.splice(n,1)}placeOrder(){this.upload()}upload(){var t=this;return(0,f.Z)(function*(){t.isSpinner=!0,t.btnDisable=!0;let n=yield new Promise((l,u)=>{var g=Date.now();t.photoArray.forEach(c=>{const I=t.base64ToImage(c),w=t.storage.ref(`product-list/${g}`);t.storage.upload(`product-list/${g}`,I).snapshotChanges().pipe((0,P.x)(()=>{t.downloadURL=w.getDownloadURL(),t.downloadURL.subscribe(d=>{t.uploadUrl.push(d),l(t.uploadUrl)})})).subscribe(d=>{})})});n&&(t.isSpinner=!1,t.btnDisable=!1,t.placeOrderData(n))})()}placeOrderData(t){if(localStorage.getItem("employee")&&localStorage.getItem("address1")&&localStorage.getItem("pinCode")&&localStorage.getItem("mobileNo")){let i={userId:localStorage.getItem(b.lq),cartArray:t,status:"ordered",date:new Date,totalAmount:"null",type:"camera"};this.cartService.checkoutProduct.next(i),this.router.navigateByUrl("/checkout"),this.photoService.deleteAllPicture(this.photoArray)}else this.cartService.routingBehaviour.next("/camera"),this.router.navigateByUrl("/user")}base64ToImage(t){const i=t.split(","),n=atob(i[1]),l=new ArrayBuffer(n?.length),u=new Uint8Array(l);for(let c=0;c<n.length;c++)u[c]=n.charCodeAt(c);return new Blob([l],{type:"image/png"})}}return o.\u0275fac=function(t){return new(t||o)(e.Y36(C.y),e.Y36(Z.Q1),e.Y36(p.F0),e.Y36(x.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-camera"]],decls:18,vars:2,consts:[["color","primary"],["slot","start"],["name","menu"],[1,"logo-img"],["src","../../assets/img/login-logo-1.png"],["fullscreen","","scroll-y","true"],["size","6",4,"ngFor","ngForOf"],["vertical","bottom","horizontal","center","slot","fixed"],[3,"click"],["name","camera"],["class","grid_12 summary",4,"ngIf"],["size","6"],[3,"src"],["type","checkbox","id","vehicle1","name","vehicle1","value","Bike",3,"change"],[1,"grid_12","summary"],[1,"inner_container"],[1,"btn-summary","parent-container"],[1,"child"],["color","primary","name","lines-small",4,"ngIf"],["fill","outline",3,"disabled","click"],["color","primary","name","lines-small"]],template:function(t,i){1&t&&(e.TgZ(0,"ion-header")(1,"ion-toolbar",0)(2,"ion-buttons",1)(3,"ion-menu-button"),e._UZ(4,"ion-icon",2),e.qZA(),e.TgZ(5,"div",3),e._UZ(6,"img",4),e.qZA()()()(),e.TgZ(7,"ion-content",5)(8,"p"),e._uU(9,"Upload your shopping list here!!"),e.qZA(),e.TgZ(10,"ion-grid")(11,"ion-row"),e.YNc(12,T,3,1,"ion-col",6),e.qZA()(),e.TgZ(13,"ion-fab",7)(14,"ion-fab-button",8),e.NdJ("click",function(){return i.addPhotoToGallery()}),e._UZ(15,"ion-icon",9),e.qZA()()(),e.TgZ(16,"ion-footer"),e.YNc(17,S,8,2,"div",10),e.qZA()),2&t&&(e.xp6(12),e.Q6J("ngForOf",i.photoService.photos),e.xp6(5),e.Q6J("ngIf",i.isFooter))},dependencies:[m.sg,m.O5,a.YG,a.Sm,a.wI,a.W2,a.IJ,a.W4,a.fr,a.jY,a.Gu,a.gu,a.Xz,a.fG,a.Nd,a.PQ,a.sr],styles:[".summary[_ngcontent-%COMP%]{padding:20px;background:#fff;box-shadow:0 0 5px #0000001a;border-radius:5px}.summary[_ngcontent-%COMP%]   .meta-data[_ngcontent-%COMP%]{border-right:1px solid #eee;padding-right:10%}.summary[_ngcontent-%COMP%]   .total[_ngcontent-%COMP%]{font-size:2em;text-align:center;line-height:65px}ion-item[_ngcontent-%COMP%]{border:none}.mt-5[_ngcontent-%COMP%]{margin-top:15%}.parent-container[_ngcontent-%COMP%]{display:flex;position:relative;margin-top:10px;justify-content:space-between}"]}),o})(),canActivate:[y.a]}];let O=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(M),p.Bz]}),o})(),U=(()=>{class o{}return o.\u0275fac=function(t){return new(t||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[m.ez,v.u5,a.Pc,O]}),o})()}}]);